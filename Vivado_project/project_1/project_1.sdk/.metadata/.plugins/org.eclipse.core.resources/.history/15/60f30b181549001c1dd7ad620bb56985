#include "NeuralNetwork.h"

int8_t bias_[] = {
	#include "bias.dat"
};

int8_t weights_[] = {
	#include "weights.dat"
};

uint8_t getChoiceFromUser()
{
	xil_printf("Enter choice: \r\n");
	/* Read an input value from the console. */
	uint8_t value = inbyte();
	xil_printf("\r\n\r\n");

	return value-48;
}

int main()
{
	int input[80] = {18, 10, 8, 36, -28, -2, -5, -21, 4, 2, -10, 5, -1, -3, 18, 5, -19, 18, -3, 8, -4, 0, -14, -2, -7, -6, 6, -1, -2, -5, -4, -11, -1, -4, -4, -6, -9, 6, 4, -4, -6, 3, 10, 10, -3, 1, 1, 2, -6, -1, -5, 6, 5, 9, 7, 1, -3, -4, -4, -4, -1, 0, -1, 1, -13, 8, 2, -1, -1, 3, -2, -6, 4, 0, -3, 2, -5, -2, 4, -5};
	int input1[80] = {21, 45, -6, 15, 15, 19, -18, 7, -2, 19, -2, 11, 11, -5, -16, 9, -9, -18, 5, 15, -3, -4, -2, 11, -6, 6, -9, 7, 9, -1, 1, 3, 2, -1, -1, -10, 0, -2, -2, -2, 1, -1, 1, -6, -3, 5, -5, 2, -1, 0, -1, -8, -3, 0, -1, 3, 0, -4, 1, -1, 0, -4, -5, -2, 2, 1, 0, -2, -2, 3, -2, 1, -1, -1, -4, -1, 2, -4, -1, 0};

	NeuralNetwork* nn = NeuralNetwork::getInstance();

	nn->setBias((char*)bias_);
	nn->setWeights((char*)weights_);

	u32 res = nn->runNN((char*) input);
	xil_printf("Res is %d\r\n", res);

	res = nn->runNN((char*) input1);
	xil_printf("Res is %d\r\n", res);

	while(1){
		uint8_t choice = getChoiceFromUser();

	}
	xil_printf("Done\r\n");
	return 0;
}
